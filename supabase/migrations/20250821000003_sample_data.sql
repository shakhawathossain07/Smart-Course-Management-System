/*
  # Sample Data Seeding for Smart Course Management System
  
  This script populates the database with sample data for testing and demo purposes.
  It creates admin users, instructors, students, courses, assignments, and sample submissions.
*/

-- First, let's insert some sample profiles
-- Note: These IDs would normally be generated by Supabase Auth, but for demo purposes we'll use sample UUIDs

-- Insert admin profile
INSERT INTO profiles (id, name, email, role, department, permissions) VALUES 
('550e8400-e29b-41d4-a716-446655440001', 'System Administrator', 'admin@university.edu', 'admin', 'IT Department', ARRAY['user_management', 'course_management', 'system_settings']);

-- Insert instructor profiles
INSERT INTO profiles (id, name, email, role, department) VALUES 
('550e8400-e29b-41d4-a716-446655440002', 'Dr. Sarah Johnson', 'sarah.johnson@university.edu', 'instructor', 'Computer Science'),
('550e8400-e29b-41d4-a716-446655440003', 'Prof. Michael Chen', 'michael.chen@university.edu', 'instructor', 'Mathematics'),
('550e8400-e29b-41d4-a716-446655440004', 'Dr. Emily Rodriguez', 'emily.rodriguez@university.edu', 'instructor', 'Engineering');

-- Insert student profiles
INSERT INTO profiles (id, name, email, role, student_id, department, gpa) VALUES 
('550e8400-e29b-41d4-a716-446655440005', 'John Smith', 'john.smith@student.edu', 'student', 'STU001', 'Computer Science', 3.75),
('550e8400-e29b-41d4-a716-446655440006', 'Maria Garcia', 'maria.garcia@student.edu', 'student', 'STU002', 'Computer Science', 3.92),
('550e8400-e29b-41d4-a716-446655440007', 'David Wilson', 'david.wilson@student.edu', 'student', 'STU003', 'Mathematics', 3.58),
('550e8400-e29b-41d4-a716-446655440008', 'Lisa Zhang', 'lisa.zhang@student.edu', 'student', 'STU004', 'Engineering', 3.83),
('550e8400-e29b-41d4-a716-446655440009', 'Robert Brown', 'robert.brown@student.edu', 'student', 'STU005', 'Computer Science', 3.45),
('550e8400-e29b-41d4-a716-446655440010', 'Anna Taylor', 'anna.taylor@student.edu', 'student', 'STU006', 'Mathematics', 3.67);

-- Insert sample courses
INSERT INTO courses (id, title, description, code, instructor_id, instructor_name, start_date, end_date, max_students, credits, category, features) VALUES 
(
  '650e8400-e29b-41d4-a716-446655440001', 
  'Advanced Web Development', 
  'Learn modern web development techniques using React, Node.js, and databases. This comprehensive course covers frontend and backend development, REST APIs, authentication, and deployment strategies.',
  'CS301',
  '550e8400-e29b-41d4-a716-446655440002',
  'Dr. Sarah Johnson',
  '2024-01-15',
  '2024-05-15',
  25,
  4,
  'Computer Science',
  '[{"type": "certificate", "name": "Web Development Certificate", "description": "Completion certificate", "enabled": true}, {"type": "peer-review", "name": "Code Reviews", "description": "Peer code review system", "enabled": true}]'
),
(
  '650e8400-e29b-41d4-a716-446655440002',
  'Calculus II',
  'Advanced calculus covering integration techniques, infinite series, parametric equations, and polar coordinates. Essential for engineering and science majors.',
  'MATH202',
  '550e8400-e29b-41d4-a716-446655440003',
  'Prof. Michael Chen',
  '2024-01-20',
  '2024-05-20',
  30,
  4,
  'Mathematics',
  '[{"type": "discussion", "name": "Study Groups", "description": "Online study groups", "enabled": true}]'
),
(
  '650e8400-e29b-41d4-a716-446655440003',
  'Software Engineering Principles',
  'Introduction to software engineering methodologies, project management, version control, testing strategies, and agile development practices.',
  'ENG405',
  '550e8400-e29b-41d4-a716-446655440004',
  'Dr. Emily Rodriguez',
  '2024-02-01',
  '2024-06-01',
  20,
  3,
  'Engineering',
  '[{"type": "badge", "name": "Agile Practitioner", "description": "Agile development badge", "enabled": true}]'
);

-- Insert enrollments (students enrolled in courses)
INSERT INTO enrollments (student_id, course_id) VALUES 
-- John Smith enrolled in Web Dev and Software Engineering
('550e8400-e29b-41d4-a716-446655440005', '650e8400-e29b-41d4-a716-446655440001'),
('550e8400-e29b-41d4-a716-446655440005', '650e8400-e29b-41d4-a716-446655440003'),
-- Maria Garcia enrolled in Web Dev and Calculus
('550e8400-e29b-41d4-a716-446655440006', '650e8400-e29b-41d4-a716-446655440001'),
('550e8400-e29b-41d4-a716-446655440006', '650e8400-e29b-41d4-a716-446655440002'),
-- David Wilson enrolled in Calculus
('550e8400-e29b-41d4-a716-446655440007', '650e8400-e29b-41d4-a716-446655440002'),
-- Lisa Zhang enrolled in Software Engineering
('550e8400-e29b-41d4-a716-446655440008', '650e8400-e29b-41d4-a716-446655440003'),
-- Robert Brown enrolled in Web Dev
('550e8400-e29b-41d4-a716-446655440009', '650e8400-e29b-41d4-a716-446655440001'),
-- Anna Taylor enrolled in Calculus
('550e8400-e29b-41d4-a716-446655440010', '650e8400-e29b-41d4-a716-446655440002');

-- Insert sample assignments
INSERT INTO assignments (id, course_id, title, description, instructions, due_date, total_points, max_grade, grading_strategy, created_by, attachments, settings) VALUES 
(
  '750e8400-e29b-41d4-a716-446655440001',
  '650e8400-e29b-41d4-a716-446655440001',
  'React Portfolio Website',
  'Create a personal portfolio website using React, showcasing your projects and skills with responsive design and modern UI/UX principles.',
  'Build a portfolio website with at least 5 pages: Home, About, Projects, Skills, and Contact. Use React hooks, CSS-in-JS or Tailwind CSS, and deploy to Netlify or Vercel. Include at least 3 project showcases with live demos and source code links.',
  '2024-03-15 23:59:00',
  100,
  100,
  'percentage',
  '550e8400-e29b-41d4-a716-446655440002',
  '[]',
  '{"allow_late_submissions": true, "max_file_size": 52428800, "allowed_file_types": ["zip", "tar.gz", "pdf"]}'
),
(
  '750e8400-e29b-41d4-a716-446655440002',
  '650e8400-e29b-41d4-a716-446655440001',
  'REST API Development',
  'Design and implement a RESTful API using Node.js and Express, with proper authentication, validation, and documentation.',
  'Create a REST API for a blog system with user authentication, CRUD operations for posts and comments, input validation, error handling, and Swagger documentation. Use JWT for authentication and MongoDB or PostgreSQL for data storage.',
  '2024-04-10 23:59:00',
  100,
  100,
  'percentage',
  '550e8400-e29b-41d4-a716-446655440002',
  '[{"fileName": "API_Requirements.pdf", "url": "/api/files/requirements.pdf", "fileSize": 245760}]',
  '{"allow_late_submissions": false, "max_file_size": 104857600}'
),
(
  '750e8400-e29b-41d4-a716-446655440003',
  '650e8400-e29b-41d4-a716-446655440002',
  'Integration Techniques Quiz',
  'Comprehensive quiz covering various integration methods including substitution, integration by parts, partial fractions, and trigonometric substitution.',
  'Complete all problems showing detailed work. Partial credit will be given for correct methods even if final answers are incorrect. You have 90 minutes to complete this quiz.',
  '2024-03-20 14:30:00',
  50,
  50,
  'percentage',
  '550e8400-e29b-41d4-a716-446655440003',
  '[]',
  '{"allow_late_submissions": false, "time_limit": 90}'
),
(
  '750e8400-e29b-41d4-a716-446655440004',
  '650e8400-e29b-41d4-a716-446655440003',
  'Agile Project Plan',
  'Develop a comprehensive project plan using Agile methodology for a software development project, including user stories, sprint planning, and risk assessment.',
  'Create a complete project plan for developing a mobile app. Include: project charter, stakeholder analysis, user personas, user stories with acceptance criteria, sprint backlog for 3 sprints, risk register, and retrospective plan.',
  '2024-04-25 18:00:00',
  75,
  75,
  'percentage',
  '550e8400-e29b-41d4-a716-446655440004',
  '[{"fileName": "Agile_Template.docx", "url": "/api/files/agile_template.docx", "fileSize": 87432}]',
  '{"allow_late_submissions": true, "late_penalty": 10}'
);

-- Insert sample submissions
INSERT INTO submissions (id, assignment_id, student_id, student_name, content, grade, feedback, status, submitted_at, graded_at, graded_by) VALUES 
(
  '850e8400-e29b-41d4-a716-446655440001',
  '750e8400-e29b-41d4-a716-446655440001',
  '550e8400-e29b-41d4-a716-446655440005',
  'John Smith',
  'Submitted my React portfolio website. The site includes all required pages with responsive design, dark/light theme toggle, and smooth animations. Deployed on Vercel with custom domain.',
  92,
  'Excellent work! Your portfolio demonstrates strong React skills and modern design principles. The project showcase section is particularly impressive. Minor improvements could be made to the loading performance and accessibility features.',
  'graded',
  '2024-03-14 20:30:00',
  '2024-03-16 10:15:00',
  '550e8400-e29b-41d4-a716-446655440002'
),
(
  '850e8400-e29b-41d4-a716-446655440002',
  '750e8400-e29b-41d4-a716-446655440001',
  '550e8400-e29b-41d4-a716-446655440006',
  'Maria Garcia',
  'Portfolio website with React, TypeScript, and Framer Motion animations. Features include contact form with EmailJS integration, blog section with Markdown support, and performance optimization.',
  98,
  'Outstanding submission! The use of TypeScript adds robustness to your code, and the animations are smooth and purposeful. The blog integration shows initiative beyond the requirements. Perfect implementation of responsive design.',
  'graded',
  '2024-03-13 19:45:00',
  '2024-03-16 10:30:00',
  '550e8400-e29b-41d4-a716-446655440002'
),
(
  '850e8400-e29b-41d4-a716-446655440003',
  '750e8400-e29b-41d4-a716-446655440002',
  '550e8400-e29b-41d4-a716-446655440005',
  'John Smith',
  'REST API for blog system implemented with Node.js, Express, and PostgreSQL. Features JWT authentication, bcrypt password hashing, input validation with Joi, comprehensive error handling, and full Swagger documentation.',
  NULL,
  NULL,
  'submitted',
  '2024-04-09 22:15:00',
  NULL,
  NULL
),
(
  '850e8400-e29b-41d4-a716-446655440004',
  '750e8400-e29b-41d4-a716-446655440003',
  '550e8400-e29b-41d4-a716-446655440007',
  'David Wilson',
  'Completed integration quiz with detailed solutions for all 15 problems. Used various techniques including u-substitution, integration by parts, and partial fractions.',
  45,
  'Good understanding of integration techniques demonstrated. Minor errors in problems 8 and 12. Review trigonometric substitution methods for improvement.',
  'graded',
  '2024-03-20 13:45:00',
  '2024-03-21 09:20:00',
  '550e8400-e29b-41d4-a716-446655440003'
);

-- Insert sample attendance records
INSERT INTO attendance_records (course_id, student_id, date, status, marked_by) VALUES 
-- Web Development course attendance
('650e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440005', '2024-02-01', 'present', '550e8400-e29b-41d4-a716-446655440002'),
('650e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440006', '2024-02-01', 'present', '550e8400-e29b-41d4-a716-446655440002'),
('650e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440009', '2024-02-01', 'late', '550e8400-e29b-41d4-a716-446655440002'),
-- Calculus course attendance
('650e8400-e29b-41d4-a716-446655440002', '550e8400-e29b-41d4-a716-446655440006', '2024-02-03', 'present', '550e8400-e29b-41d4-a716-446655440003'),
('650e8400-e29b-41d4-a716-446655440002', '550e8400-e29b-41d4-a716-446655440007', '2024-02-03', 'present', '550e8400-e29b-41d4-a716-446655440003'),
('650e8400-e29b-41d4-a716-446655440002', '550e8400-e29b-41d4-a716-446655440010', '2024-02-03', 'absent', '550e8400-e29b-41d4-a716-446655440003');

-- Insert sample notifications
INSERT INTO notifications (type, title, message, recipient_id) VALUES 
('assignment', 'New Assignment Posted', 'A new assignment "React Portfolio Website" has been posted in Advanced Web Development.', '550e8400-e29b-41d4-a716-446655440005'),
('assignment', 'New Assignment Posted', 'A new assignment "React Portfolio Website" has been posted in Advanced Web Development.', '550e8400-e29b-41d4-a716-446655440006'),
('assignment', 'New Assignment Posted', 'A new assignment "React Portfolio Website" has been posted in Advanced Web Development.', '550e8400-e29b-41d4-a716-446655440009'),
('grade', 'Assignment Graded', 'Your submission for "React Portfolio Website" has been graded. Score: 92/100', '550e8400-e29b-41d4-a716-446655440005'),
('grade', 'Assignment Graded', 'Your submission for "React Portfolio Website" has been graded. Score: 98/100', '550e8400-e29b-41d4-a716-446655440006'),
('attendance', 'Attendance Reminder', 'Don\'t forget about today\'s Calculus II class at 2:00 PM.', '550e8400-e29b-41d4-a716-446655440007'),
('announcement', 'Course Update', 'The midterm exam for Software Engineering Principles has been rescheduled to next Friday.', '550e8400-e29b-41d4-a716-446655440005'),
('announcement', 'Course Update', 'The midterm exam for Software Engineering Principles has been rescheduled to next Friday.', '550e8400-e29b-41d4-a716-446655440008');

-- Insert sample file uploads
INSERT INTO file_uploads (file_name, file_path, file_size, mime_type, uploaded_by, entity_type, entity_id, public_url) VALUES 
('portfolio_project.zip', 'assignments/750e8400-e29b-41d4-a716-446655440001/john_smith_portfolio.zip', 2547832, 'application/zip', '550e8400-e29b-41d4-a716-446655440005', 'submission', '850e8400-e29b-41d4-a716-446655440001', 'https://storage.supabase.co/course-files/assignments/john_smith_portfolio.zip'),
('maria_portfolio.zip', 'assignments/750e8400-e29b-41d4-a716-446655440001/maria_garcia_portfolio.zip', 3247891, 'application/zip', '550e8400-e29b-41d4-a716-446655440006', 'submission', '850e8400-e29b-41d4-a716-446655440002', 'https://storage.supabase.co/course-files/assignments/maria_garcia_portfolio.zip'),
('blog_api.tar.gz', 'assignments/750e8400-e29b-41d4-a716-446655440002/john_smith_api.tar.gz', 1847293, 'application/gzip', '550e8400-e29b-41d4-a716-446655440005', 'submission', '850e8400-e29b-41d4-a716-446655440003', 'https://storage.supabase.co/course-files/assignments/john_smith_api.tar.gz'),
('API_Requirements.pdf', 'assignments/750e8400-e29b-41d4-a716-446655440002/requirements.pdf', 245760, 'application/pdf', '550e8400-e29b-41d4-a716-446655440002', 'assignment', '750e8400-e29b-41d4-a716-446655440002', 'https://storage.supabase.co/course-files/assignments/requirements.pdf');
